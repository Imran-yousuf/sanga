$(function(){function e(e,a){var t=$(e.target),n="",i=null;a.item?(n=a.item.label,i=a.item.value):n=$(e.target).val(),t.parent().append('<span class="tag tag-shared removeable">'+n+"</span> "),i?t.parent().append('<input type="hidden" name="skills[][id]" value="'+i+'">'):t.parent().append('<input type="hidden" name="skills[][name]" value="'+n+'">'),t.val(""),t.focus()}$.localStorage("sanga.contacs.add")&&$.each($.localStorage("sanga.contacs.add"),function(e,a){a||($("#"+e).siblings().hide(),$("#"+e).addClass("grayed"))}),$("fieldset legend").click(function(){$(this).toggleClass("grayed"),$(this).siblings().toggle(),$.localStorage("sanga.contacs.add."+$(this).attr("id"),$($(this).siblings()[0]).is(":visible"))}),$("#birth").datepicker({showMonthAfterYear:!0,yearRange:"1900:"+(new Date).getFullYear(),changeMonth:!0,changeYear:!0}),$(document).on("click",".removeable",function(){$(this).next().remove(),$(this).remove()}),$("#skills").bind("keydown",function(a){a.keyCode!==$.ui.keyCode.TAB&&a.keyCode!==$.ui.keyCode.ENTER||!$(this).autocomplete("instance").menu.active?a.keyCode===$.ui.keyCode.ENTER&&(e(a,{item:null}),a.preventDefault()):a.preventDefault()}).autocomplete({minLength:2,source:$.sanga.baseUrl+"/Skills/search",focus:function(){return!1},select:function(a,t){return this.value=t.item.label,e(a,t),!1},change:function(a,t){return e(a,t),!1}}),$("#xzip").autocomplete({minLength:2,source:$.sanga.baseUrl+"/Zips/search",focus:function(){return!1},select:function(e,a){return this.value=a.item.label,$("#zip-id").val(a.item.value),!1},change:function(e,a){return this.value=a.item.label,$("#zip-id").val(a.item.value),!1}}),$("#xworkplace-zip").autocomplete({minLength:2,source:$.sanga.baseUrl+"/Zips/search",focus:function(){return!1},select:function(e,a){return this.value=a.item.label,$("#workplace-zip-id").val(a.item.value),!1},change:function(e,a){return this.value=a.item.label,$("#workplace-zip-id").val(a.item.value),!1}}),$("#xfamily").autocomplete({minLength:2,source:$.sanga.baseUrl+"/Contacts/search",html:!0,focus:function(){return!1},select:function(e,a){return this.value=a.item.label.replace(/(<([^>]+)>)/gi,""),$("#family-member-id").val(a.item.value),!1},change:function(e,a){return this.value=a.item.label.replace(/(<([^>]+)>)/gi,""),$("#family-member-id").val(a.item.value),!1}})});