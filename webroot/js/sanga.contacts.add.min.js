$(function(){function e(e,t){var a=$(e.target),n="",i=null;t.item?(n=t.item.label,i=t.item.value):n=$(e.target).val(),a.parent().append('<span class="tag tag-shared removeable">'+n+"</span> "),i?a.parent().append('<input type="hidden" name="skills[][id]" value="'+i+'">'):a.parent().append('<input type="hidden" name="skills[][name]" value="'+n+'">'),a.val(""),a.focus()}$.each($.localStorage("sanga.contacs.add"),function(e,t){t||($("#"+e).siblings().hide(),$("#"+e).addClass("grayed"))}),$("fieldset legend").click(function(){$(this).toggleClass("grayed"),$(this).siblings().toggle(),$.localStorage("sanga.contacs.add."+$(this).attr("id"),$($(this).siblings()[0]).is(":visible"))}),$("#birth").datepicker({showMonthAfterYear:!0,yearRange:"1900:"+(new Date).getFullYear(),changeMonth:!0,changeYear:!0}),$(document).on("click",".removeable",function(){$(this).next().remove(),$(this).remove()}),$("#skills").bind("keydown",function(t){t.keyCode!==$.ui.keyCode.TAB&&t.keyCode!==$.ui.keyCode.ENTER||!$(this).autocomplete("instance").menu.active?t.keyCode===$.ui.keyCode.ENTER&&(e(t,{item:null}),t.preventDefault()):t.preventDefault()}).autocomplete({minLength:2,source:$.sanga.baseUrl+"/Skills/search",focus:function(){return!1},select:function(t,a){return this.value=a.item.label,e(t,a),!1},change:function(t,a){return e(t,a),!1}}),$("#xzip").autocomplete({minLength:2,source:$.sanga.baseUrl+"/Zips/search",focus:function(){return!1},select:function(e,t){return this.value=t.item.label,$("#zip-id").val(t.item.value),!1},change:function(e,t){return this.value=t.item.label,$("#zip-id").val(t.item.value),!1}}),$("#xworkplace-zip").autocomplete({minLength:2,source:$.sanga.baseUrl+"/Zips/search",focus:function(){return!1},select:function(e,t){return this.value=t.item.label,$("#workplace-zip-id").val(t.item.value),!1},change:function(e,t){return this.value=t.item.label,$("#workplace-zip-id").val(t.item.value),!1}}),$("#xfamily").autocomplete({minLength:2,source:$.sanga.baseUrl+"/Contacts/search",html:!0,focus:function(){return!1},select:function(e,t){return this.value=t.item.label.replace(/(<([^>]+)>)/gi,""),$("#family-member-id").val(t.item.value),!1},change:function(e,t){return this.value=t.item.label.replace(/(<([^>]+)>)/gi,""),$("#family-member-id").val(t.item.value),!1}})});