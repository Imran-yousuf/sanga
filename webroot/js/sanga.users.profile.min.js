$(function(){$(".editbox").hide(),$("#editForm").submit(function(e){e.preventDefault()}),$("p.ed").hover(function(){$("#ajaxsave").is(":hidden")&&$(this).parent().parent().append($("#editlink").show())}),$("#editlink").click(function(e){$(".editbox").hide(),$("span.dta").show(),$(this).parent().find(".editbox").show(),$(this).parent().find("span.dta").hide(),$("#ajaxsave").hide(),e.preventDefault()}),$(".editbox").keyup(function(e){$("#editlink").hide(),$(this).parent().parent().parent().append($("#ajaxsave").show()),"Enter"==e.key&&$("#ajaxsave").click(),"Escape"==e.key&&($(this).hide(),$(this).parent().find(".dta").show(),$("#ajaxsave").hide())}),$("#ajaxsave").click(function(e){var t,a,i={},n=$(this).parent().find(".editbox");t=n.parent().find(".dta"),a=n.is(":checkbox")?+n.is(":checked"):n.val(),i[n.attr("id")]=a;var r=n.parent(),d=t.text();i.password?t.text("******"):t.text(a),$("#editlink").hide(),r.append($("#ajaxloader").show()),$("#ajaxsave").hide(),$.ajax({url:$("#editForm").attr("action"),data:i,type:"post",dataType:"json",error:function(e,a,i){$("#ajaxloader").hide(),r.append($("#errorImg").show()),t.text(d),$(".editbox").val(d),noty({text:a+" "+e.responseJSON.message,type:"error",timeout:3500})},success:function(e,a,i){if($("#ajaxloader").hide(),i.responseJSON.error){var n="error",r=i.responseJSON.error;t.text(d),$(".editbox").val(d)}else var n="alert",r=i.responseJSON.save;noty({text:r,type:n,timeout:3500})}}),n.hide(),t.show()})});